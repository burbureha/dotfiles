"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[9259],{31263:(e,t,i)=>{i.r(t),i.d(t,{AppsSetup:()=>L});var o=i(77094),n=i.n(o),r=i(96486),s=i.n(r),a=i(67294),l=i(13991),d=i(480),c=i(16489),p=i(24405),u=i(66673),g=i(21202),h=i(82990),f=i(5366),m=i(54885),v=i(90922),b=i(95489),w=i(28020),y=i(39883),x=i(54258),S=i(472),k=i(79315),C=i(12768),B=i(82136),I=i(44653),P=i(42922),W=i(68785),Z=i(68705),M=i(3779),H=i(64921);function F(e){const{appTemplate:t,isSelected:i}=e,[o,r]=(0,a.useState)(!1),s=(0,c.VK)((()=>(0,y.SP)(t.uri)),[t.uri]),l=(0,p.yK)((e=>({container:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center"},appButton:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:62,height:62,backgroundColor:e.whiteButtonBackground,boxShadow:e.lightBoxShadow,borderRadius:12,background:"dark"===e.mode?e.accentColors.gray[200]:e.whiteButtonBackground},selectedWrapper:{boxShadow:e.outlineBlueInputBoxShadow,background:"dark"===e.mode?e.accentColors.gray[200]:e.buttonBackground},logo:{width:32,height:32},logoSelected:{filter:"invert(41%) sepia(77%) saturate(2017%) hue-rotate(191deg) brightness(93%) contrast(89%)"},badge:{width:26,height:26,display:"inline-flex",alignItems:"center",justifyContent:"center",backgroundColor:e.invoiceGreen,borderRadius:50,position:"absolute",top:-9,right:-9,border:`2px solid ${e.sidebarBackground}`,webkitBackdropFilter:"blur(12px)",opacity:1,transform:"scale(1)",transition:"opacity 0.2s ease, transform 0.2s ease, background-color 0.1s linear"},selectBadge:{backgroundColor:e.invoiceGreen},selectedBadge:{backgroundColor:e.blueButtonBackground},deselectBadge:{backgroundColor:e.redBadgeBackground},appName:{marginTop:8,fontSize:14,fontWeight:500,textAlign:"center"},buttonBadgeIcon:{width:16,height:16,fill:"white"}})),[]),d=(0,a.useCallback)((()=>{i?e.onDeSelect(t.uri):e.onSelect(t.uri),r(!1)}),[t.uri,i,e]);return n()("div",{style:l.container,onMouseEnter:()=>{r(!0),e.onHover()},onMouseLeave:()=>{r(!1),e.onUnhover()}},void 0,n()(H.Z,{style:{...l.appButton,...i?l.selectedWrapper:{}},onClick:d,ignoreLocalHoverState:!0},void 0,n()("img",{style:{...l.logo,...i?l.logoSelected:{}},src:s?s.logo:t.icon})),n()(H.Z,{style:{...l.badge,...i?o?l.deselectBadge:l.selectedBadge:o?l.selectBadge:{opacity:0,transform:"scale(0.4)"}},onClick:d,ignoreLocalHoverState:!0},void 0,i?o?M.Z.closeSmall({width:16,height:16,fill:"white"}):M.Z.thinCheck({width:15,height:15,fill:"white"}):M.Z.plusThick({width:16,height:16,fill:"white"})),n()("div",{style:l.appName},void 0,s?s.name:t.shortName))}const T=s().compact(y.pP.map((e=>{var t;return null===(t=(0,y.SP)(e))||void 0===t?void 0:t.presets.find((t=>t.uri===e))})));function D(e){const t=(0,d.O7)(),i=(0,c.VK)((()=>{const e=(0,w.ui)(t);return{left:e,right:e,bottom:Z.Z.paddingBottom(t),coverHeight:Z.Z.defaultPageCoverHeight(t)}}),[t]),o=a.useMemo((()=>{const e={};return T.forEach((i=>{var o;const n=i.uri.startsWith("notion://wiki")?(0,x.L)(i):null===(o=i.previews)||void 0===o?void 0:o.find((e=>"previewRootId"in e));n&&(e[i.uri]=new I.G(t,{id:n.previewRootId,table:g.iU,spaceId:n.spaceId}))})),e}),[t]),r=e.presetUri.startsWith("notion://wiki"),s=o[e.presetUri];return s?n()("div",{style:{minWidth:900,height:"100%",position:"relative",paddingTop:r?0:"10%"}},void 0,n()(Z.Z,{store:s,loadingContainerStore:void 0,context:B.S.InAppTemplatePreview,titleFontSize:r?void 0:28,paddingBottom:i.bottom,paddingLeft:i.left,paddingRight:i.right,pageCoverHeight:i.coverHeight,disabled:!0},s.id),n()("div",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:1,zIndex:999,cursor:"pointer"}})):null}function A(e){const t=(0,a.useCallback)(((e,t)=>(e%t+t)%t),[]),i=(0,u.Kt)(e.forceIndex,200,((e,t)=>e===t)),[o,r]=(0,a.useState)(0);(0,a.useEffect)((()=>{if(void 0===i)return;const n=t(-o,e.items.length),s=t(i-n,e.items.length);r((e=>e-s))}),[o,r,i,t,e.items.length]),(0,a.useEffect)((()=>{const t=setInterval((()=>{void 0===i&&r((e=>e-1))}),e.rotationDelayMs??2500);return()=>{clearInterval(t)}}),[r,i,e.rotationDelayMs]);const l=(0,p.yK)((e=>({item:{position:"absolute",top:0,left:0,bottom:0,right:0,background:"white",borderRadius:"8px 0 0 8px",border:"1px solid rgba(0, 0, 0, 0.05)",boxShadow:"0px 16px 24px rgba(0, 0, 0, 0.06), 0px 2px 6px rgba(0, 0, 0, 0.04), 0px 0px 1px rgba(0, 0, 0, 0.04)",overflow:"hidden",transition:"transform 0.5s ease-in-out, opacity 0.5s ease-out"}})),[]),d=e.items.length,c=t(-o,d),g=e.items[t(c-1,d)].node,h=e.items[c].node,f=[...s().times(d,(e=>({key:`before${e}`,node:null}))),...e.items,...s().times(d,(e=>({key:`after${e}`,node:null})))],m=f.map(((i,r)=>{let{key:s}=i;const a=t(r+o,f.length),c=a>=d&&a<2*d,p=`translateX(${(a-d)*(e.offset??12)}px) translateY(${(a-d)*(e.offset??16-1.5*(a-d))}px)`,u=c?1-.15*(a-d):0;return n()("div",{style:{...l.item,zIndex:f.length-a,transform:p,opacity:u}},s,a===d?h:a===d-1?g:void 0)}));return n()("div",{style:{position:"relative",...e.style}},void 0,m)}function L(e){const[t]=(0,c.AF)(C.default),[{currentUserRootStore:i,currentSpaceViewStore:o,currentSpaceStore:r,currentUserSettingsStore:u}]=(0,c.AF)(k.default),g=(0,d.O7)(),[w,y]=(0,a.useState)(!1),[x,B]=(0,a.useState)(void 0),Z=(0,p.yK)((e=>({container:{backgroundColor:e.sidebarBackground,width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",borderLeft:`1px solid ${e.lightDividerColor}`},left:{maxWidth:375,minWidth:320,maxHeight:"100%",flex:1,display:"flex",flexDirection:"column",alignItems:"stretch",marginLeft:"10%",marginRight:"10%",padding:"42px 16px",overflowX:"visible",overflowY:"auto"},right:{flex:1,height:"70%",overflow:"visible"},header:{position:"relative",textAlign:"left",paddingBottom:42},title:{fontWeight:h.Z.fontWeight.semibold,fontSize:28,lineHeight:1.2,color:e.regularTextColor,fontFamily:h.Z.getHeaderFontFamily({locale:l.SP}),marginBottom:16,width:"90%"},subtitle:{fontSize:18,lineHeight:1.45,paddingTop:2,color:e.mediumTextColor,fontWeight:h.Z.fontWeight.regular},apps:{marginBottom:48,display:"inline-flex",flexWrap:"wrap",justifyContent:"space-between"},previewImage:{width:"100%",height:"100%"}})),[]),M=(0,c.VK)((()=>g.device.isPhone),[g]);if(!o||!i||!u)return null;if(!t.isOnboarding||"workspace_setup"!==t.stage)return null;const H=e=>{const i=s().uniq([...t.selectedPresets,e]),o=s().sortBy(i,(e=>T.findIndex((t=>t.uri===e))));C.default.setState({...t,selectedPresets:o}),(0,m.X3)(g,{action:"select",preset:e})},L=e=>{const i=t.selectedPresets.filter((t=>t!==e));C.default.setState({...t,selectedPresets:i}),(0,m.X3)(g,{action:"deselect",preset:e})},z=t.selectedPresets.length>0?t.selectedPresets:T.map((e=>e.uri)),R=z.findIndex((e=>(null==x?void 0:x.uri)===e)),U=n()(A,{style:{width:"100%",height:"100%"},items:z.map((e=>({key:e,node:n()(D,{presetUri:e})}))),forceIndex:R>-1?R:void 0});return a.createElement(a.Fragment,null,n()("div",{style:Z.container},void 0,n()("div",{style:Z.left},void 0,n()("div",{style:{display:"flex",alignItems:"stretch",flexDirection:"column"}},void 0,n()("div",{style:Z.header},void 0,n()("div",{style:Z.title},void 0,n()(f.FormattedMessage,{id:"apps.workspacesetup.header.title",defaultMessage:"Get started with Notion",description:"Header shown during onboarding to Get Started with Notion"})),n()("div",{style:Z.subtitle},void 0,n()("div",{},void 0,n()(f.FormattedMessage,{id:"apps.workspacesetup.header.description",defaultMessage:"Add templates to your workspace, and customize them in a few simple steps."})))),n()("div",{style:Z.apps},void 0,T.map((e=>n()(F,{appTemplate:e,isSelected:t.selectedPresets.includes(e.uri),onSelect:H,onDeSelect:L,onHover:()=>B(e),onUnhover:()=>B(void 0)})))),t.selectedPresets.length>0?n()(P.Z,{isLarge:!0,style:{height:40},onClick:async()=>{var e;if(!r||!o)return;y(!0);const i=S.default.createMetric("continue_with_apps"),n=null===(e=o.getTeamsStores()[0])||void 0===e?void 0:e.id,s=I.zX.createChildStore(r,{table:"team",id:n,spaceId:r.id}),a=o.getCreatedOnboardingTemplates()?[]:await(0,v.Xt)({environment:g,presets:t.selectedPresets,spaceStore:r,spaceViewStore:o,teamStore:s});a.length>0&&(t.redirectData={type:"redirect_page",pageId:a[0].id,spaceId:r.id},C.default.setState(t)),await(0,b.lp)(g,t),S.default.emit(g,i,{appsSelected:t.selectedPresets})},disabled:w},void 0,w?n()(W.Z,{isWhite:!0}):n()(f.FormattedMessage,{id:"apps.workspacesetup.button.continueWithChosenApps",defaultMessage:"{num, plural, one {Continue with 1 template} other {Continue with {num} templates}}",values:{num:t.selectedPresets.length}})):n()(P.Z,{isLarge:!0,style:{height:40},onClick:async()=>{y(!0),await(0,b.lp)(g,t)},disabled:w},void 0,w?n()(W.Z,{isWhite:!0}):n()(f.FormattedMessage,{id:"apps.workspacesetup.button.continueWithoutChoosingApps",defaultMessage:"I'll add templates later"})))),!M&&n()("div",{style:Z.right},void 0,U)))}}}]);